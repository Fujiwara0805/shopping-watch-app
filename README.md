# ãƒˆã‚¯ãƒ‰ã‚¯ Î²ç‰ˆ ğŸ›’

ã¿ã‚“ãªã§ãŠå¾—ãªæƒ…å ±ã‚’å…±æœ‰ã™ã‚‹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æƒ…å ±å…±æœ‰ã‚¢ãƒ—ãƒªã§ã™ã€‚è¿‘æ‰€ã®ã‚¹ãƒ¼ãƒ‘ãƒ¼ã®ãŠæƒ£èœã‚„ã‚¿ã‚¤ãƒ ã‚»ãƒ¼ãƒ«æƒ…å ±ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼åŒå£«ã§å…±æœ‰ã—ã€ãŠå¾—ãªè²·ã„ç‰©ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¾ã™ã€‚

## ğŸ“± ã‚¢ãƒ—ãƒªã®ç‰¹å¾´

- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æŠ•ç¨¿**: ã‚¹ãƒ¼ãƒ‘ãƒ¼ã®ãŠå¾—æƒ…å ±ã‚’å†™çœŸä»˜ãã§æŠ•ç¨¿
- **ä½ç½®æƒ…å ±é€£æº**: ç¾åœ¨åœ°ã‹ã‚‰è¿‘ã„åº—èˆ—ã®æƒ…å ±ã‚’å„ªå…ˆè¡¨ç¤º
- **LINEé€šçŸ¥**: ãŠæ°—ã«å…¥ã‚Šåº—èˆ—ã®æ–°ç€æƒ…å ±ã‚’LINEã§å—ä¿¡
- **ã„ã„ã­æ©Ÿèƒ½**: æ°—ã«ãªã‚‹æŠ•ç¨¿ã«ã„ã„ã­ã—ã¦å¾Œã§ç¢ºèª
- **æ¤œç´¢ãƒ»ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼**: ã‚«ãƒ†ã‚´ãƒªã€åº—èˆ—ã€æœŸé™ãªã©ã§çµã‚Šè¾¼ã¿æ¤œç´¢
- **PWAå¯¾å¿œ**: ã‚¹ãƒãƒ¼ãƒˆãƒ•ã‚©ãƒ³ã«ã‚¢ãƒ—ãƒªã¨ã—ã¦ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å¯èƒ½

## ğŸ›  æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

### ãƒ•ãƒ­ãƒ³ãƒˆã‚¨ãƒ³ãƒ‰
- **Next.js 14** - React ãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯
- **TypeScript** - å‹å®‰å…¨ãªé–‹ç™º
- **Tailwind CSS** - ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆCSS
- **Framer Motion** - ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **shadcn/ui** - UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ©ã‚¤ãƒ–ãƒ©ãƒª
- **React Hook Form** - ãƒ•ã‚©ãƒ¼ãƒ ç®¡ç†
- **Zod** - ã‚¹ã‚­ãƒ¼ãƒãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

### ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒ»ã‚¤ãƒ³ãƒ•ãƒ©
- **Supabase** - BaaSï¼ˆãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã€èªè¨¼ã€ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ï¼‰
- **PostgreSQL** - ãƒ¡ã‚¤ãƒ³ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆPostGISæ‹¡å¼µï¼‰
- **NextAuth.js** - èªè¨¼ã‚·ã‚¹ãƒ†ãƒ 
- **Google Maps API** - åœ°å›³ãƒ»ä½ç½®æƒ…å ±ã‚µãƒ¼ãƒ“ã‚¹
- **LINE Bot SDK** - LINEé€šçŸ¥æ©Ÿèƒ½
- **Resend** - ãƒ¡ãƒ¼ãƒ«é€ä¿¡ã‚µãƒ¼ãƒ“ã‚¹

### é–‹ç™ºãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
- **Vercel** - ãƒ›ã‚¹ãƒ†ã‚£ãƒ³ã‚°
- **ESLint** - ã‚³ãƒ¼ãƒ‰å“è³ªç®¡ç†
- **TypeScript** - å‹ãƒã‚§ãƒƒã‚¯

## ğŸ—„ ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### ä¸»è¦ãƒ†ãƒ¼ãƒ–ãƒ«

#### `app_users`
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŸºæœ¬èªè¨¼æƒ…å ±
```sql
- id (UUID, Primary Key)
- google_id (String, nullable)
- line_id (String, nullable)
- email (String, unique)
- password_hash (String, nullable)
- created_at (Timestamp)
- updated_at (Timestamp)
```

#### `app_profiles`
ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«æƒ…å ±
```sql
- id (UUID, Primary Key)
- user_id (UUID, Foreign Key â†’ app_users.id)
- display_name (String)
- avatar_url (String, nullable)
- bio (Text, nullable)
- favorite_store_1_id (String, nullable)
- favorite_store_1_name (String, nullable)
- favorite_store_2_id (String, nullable)
- favorite_store_2_name (String, nullable)
- favorite_store_3_id (String, nullable)
- favorite_store_3_name (String, nullable)
- created_at (Timestamp)
- updated_at (Timestamp)
```

#### `posts`
æŠ•ç¨¿æƒ…å ±
```sql
- id (UUID, Primary Key)
- app_profile_id (UUID, Foreign Key â†’ app_profiles.id)
- store_id (String)
- store_name (String)
- category (String)
- content (Text)
- image_url (String, nullable)
- discount_rate (Integer, nullable)
- price (Integer, nullable)
- expiry_option (String) -- '1h', '3h', '6h', '12h'
- likes_count (Integer, default: 0)
- created_at (Timestamp)
- expires_at (Timestamp)
- store_latitude (Float, nullable)
- store_longitude (Float, nullable)
- location_geom (PostGIS POINT, nullable)
```

#### `post_likes`
æŠ•ç¨¿ã®ã„ã„ã­æƒ…å ±
```sql
- post_id (UUID, Foreign Key â†’ posts.id)
- user_id (UUID, Foreign Key â†’ app_users.id)
- created_at (Timestamp)
```

#### `notifications`
é€šçŸ¥æƒ…å ±
```sql
- id (UUID, Primary Key)
- user_id (UUID, Foreign Key â†’ app_profiles.id)
- type (String)
- message (Text)
- reference_post_id (UUID, nullable)
- reference_store_id (String, nullable)
- reference_store_name (String, nullable)
- is_read (Boolean, default: false)
- created_at (Timestamp)
```

## ğŸš€ ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—æ‰‹é †

### 1. å‰ææ¡ä»¶
- Node.js 18.0ä»¥ä¸Š
- npm ã¾ãŸã¯ yarn
- Supabaseã‚¢ã‚«ã‚¦ãƒ³ãƒˆ
- Google Cloud Platformã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆMaps APIç”¨ï¼‰
- LINEãƒ‡ãƒ™ãƒ­ãƒƒãƒ‘ãƒ¼ã‚¢ã‚«ã‚¦ãƒ³ãƒˆï¼ˆé€šçŸ¥æ©Ÿèƒ½ç”¨ï¼‰

### 2. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
```bash
git clone <repository-url>
cd tokudoku-app
npm install
```

### 3. ç’°å¢ƒå¤‰æ•°ã®è¨­å®š
`.env.local`ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ä½œæˆã—ã€ä»¥ä¸‹ã®ç’°å¢ƒå¤‰æ•°ã‚’è¨­å®šï¼š

```env
# Supabase
NEXT_PUBLIC_SUPABASE_URL=your_supabase_url
NEXT_PUBLIC_SUPABASE_ANON_KEY=your_supabase_anon_key
SUPABASE_SERVICE_ROLE_KEY=your_supabase_service_role_key

# NextAuth.js
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your_nextauth_secret

# Google OAuth
GOOGLE_CLIENT_ID=your_google_client_id
GOOGLE_CLIENT_SECRET=your_google_client_secret

# Google Maps API
NEXT_PUBLIC_GOOGLE_MAPS_API_KEY=your_google_maps_api_key

# LINE Bot
LINE_CLIENT_ID=your_line_client_id
LINE_CLIENT_SECRET=your_line_client_secret
LINE_CHANNEL_ACCESS_TOKEN=your_line_channel_access_token
LINE_CHANNEL_SECRET=your_line_channel_secret

# Email (Resend)
RESEND_API_KEY=your_resend_api_key

# Google Sheets (ãŠå•ã„åˆã‚ã›ç”¨)
GOOGLE_SHEETS_ID=your_google_sheets_id
GOOGLE_SHEETS_SERVICE_ACCOUNT_KEY=your_service_account_key_json
```

### 4. Supabaseã®è¨­å®š

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–
1. Supabaseãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’ä½œæˆ
2. PostGISæ‹¡å¼µã‚’æœ‰åŠ¹åŒ–
3. å¿…è¦ãªãƒ†ãƒ¼ãƒ–ãƒ«ã‚’ä½œæˆ
4. Row Level Security (RLS) ãƒãƒªã‚·ãƒ¼ã‚’è¨­å®š
5. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ãƒã‚±ãƒƒãƒˆï¼ˆ`avatars`, `images`ï¼‰ã‚’ä½œæˆ

#### Supabase Edge Functions
```bash
# Supabase CLIã‚’ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
npm install -g supabase

# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒªãƒ³ã‚¯
supabase link --project-ref your_project_ref

# Edge Functionsã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
supabase functions deploy notify-favorite-store-post
```

### 5. é–‹ç™ºã‚µãƒ¼ãƒãƒ¼ã®èµ·å‹•
```bash
npm run dev
```

ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ `http://localhost:3000` ã§èµ·å‹•ã—ã¾ã™ã€‚

## ğŸ“ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ 
